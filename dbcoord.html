---
layout: single
title: ""
author_profile: true
---

<div class="container">
   <div class="table-responsive">
   <h2>Filters:</h2>
<div align="center">
  <style>
    button {background: transparent;
            font-size: 20px;
            font-weight: bold;
            border-color: #d59b40;
            border: 4;
            border-radius: 4px;
            border-style: solid;
            transition-duration: 0.2s;}
    button:hover {background-color: #d59b40;}
  </style>

  <table>
  <tr><th><label for="lang">Language:</label></th>
  <th><label for="langfam">Language Family:</label></th>
  <th><label for="feat">Agreement Feature:</label></th>
  <th><label for="order">Word Order:</label></th>
  <th><label for="type">Coordination Type:</label></th>
  <th><label for="patt">Pattern:</label></th></tr>
  <tr>
  <td><input list="langs" name="lang" id="lang" placeholder="Search ...">
  <datalist id="langs">
  </datalist>
  </td>
  <td><input list="langfams" name="langfam" id="langfam" placeholder="Search ...">
  <datalist id="langfams">
  </datalist>
  </td>
  <td><select id="feat" name="feat">
    <option value="all">Select All</option>
    <option value="Person">Person</option>
    <option value="Number">Number</option>
    <option value="Gender">Gender</option>
    <option value="Noun Class">Noun Class</option>
   </select></td>
  <td><select id="order" name="order">
    <option value="all">Select All</option>
    <option value="SV">SV</option>
    <option value="VS">VS</option>
   </select></td>
  <td><select id="type" name="type">
    <option value="all">Select All</option>
    <option value="and">and</option>
    <option value="or">or</option>
   </select></td>
  <td>  <select id="patt" name="patt">
    <option value="all">Select All</option>
    <option value="Ineffability">Ineffability</option>
    <option value="Closest Conjunct Agreement">Closest Conjunct Agreement</option>
    <option value="Resolved Agreement">Resolved Agreement</option>
    <option value="Default Agreement">Default Agreement</option>
    <option value="Syncretism Effects">Syncretism Effects</option>
   </select></td>
  </tr>
  </table>
  <br/>
     <button type="button" name="load_data" id="load_data" class="btn btn-info">Load Data</button>
    </div>
    <br />
    <div id="language_table">
    </div>
   </div>
  </div>

</body>
</html>

<script>
$.ajax({
   url:"https://pwsmith.github.io/multivaluation/language.csv",
   dataType:"text",
   success:function(data)
    {
      //Dynamically add language options and language families from csv-file
      var langs = document.getElementById("langs");
      var langfams = document.getElementById("langfams");
      var row_data = data.split(/\r?\n|\r/);
      var lang_list = new Array("");
      var langfam_list = new Array("");
      for(var count = 1; count<row_data.length; count++)
       {
         var cell_data = row_data[count].split(",");
         var bool_cell_lang = lang_list.includes(cell_data[0]);
         //adds language if language is not already among the options
         if(!bool_cell_lang)
         {
           lang_list.push(cell_data[0]);
         }
         var bool_cell_langfam = langfam_list.includes(cell_data[1]);
         //adds language family if language family is not already among the options
         if(!bool_cell_langfam)
         {
           langfam_list.push(cell_data[1]);
         }
       }
       //adds all language options alphabetically to html code
       lang_list.sort();
       var lang_options = '<option value="Select All">';
      for(var i = 1; i<lang_list.length; i++)
      {
         lang_options += '<option value="'+lang_list[i]+'">';
      }
      $('#langs').html(lang_options);

      //adds all language family options alphabetically to html code
      langfam_list.sort();
      var langfam_options = '<option value="Select All">';
      for(var i = 1; i<langfam_list.length; i++)
      {
         langfam_options += '<option value="'+langfam_list[i]+'">';
      }
      $('#langfams').html(langfam_options);
    }
});


$(document).ready(function(){
$('#load_data').click(function(){
  $.ajax({
   url:"https://pwsmith.github.io/multivaluation/language.csv",
   dataType:"text",
   success:function(data)
   {
    var count_rows = 0;
    //Get selected language
    var lang = document.getElementById("lang");
    var sel_lang = lang.value.toString();

    //Get selected language family
    var langfam = document.getElementById("langfam");
    var sel_langfam = langfam.value.toString();

    //Get selected agreement feature
    var feat = document.getElementById("feat");
    var sel_feat = feat.options[feat.selectedIndex].value;

    //Get selected word order
    var order = document.getElementById("order");
    var sel_order = order.options[order.selectedIndex].value;

    //Get selected coordination type
    var type = document.getElementById("type");
    var sel_type = type.options[type.selectedIndex].value;

    //Get selected pattern
    var patt = document.getElementById("patt");
    var sel_patt = patt.options[patt.selectedIndex].value;

    var row_data = data.split(/\r?\n|\r/);
    var table_data = '<table class="sortable"><thead>';
    //Head Row
    table_data += '<tr>';
    var cell_data = row_data[0].split(",");
    for(var cell_count=0; cell_count<cell_data.length; cell_count++)
    {
      table_data += '<th>'+cell_data[cell_count]+'</th>';
    }
    table_data += '</tr></thead><tbody>';
    //----------
    //Data Rows
    for(var count = 1; count<row_data.length; count++)
    {
     var cell_data = row_data[count].split(",");
     var str_cell_data = cell_data.toString();

     //check whether line matches search
     var bool_feat = str_cell_data.includes(sel_feat);
     var bool_order = str_cell_data.includes(sel_order);
     var bool_type = str_cell_data.includes(sel_type);
     var bool_patt = str_cell_data.includes(sel_patt);

     /*
     var cell_lang = cell_data[0];
     var cell_langfam = cell_data[2];
     var cell_feat = new String(cell_data[4]);
     var cell_order = cell_data[5];
     var cell_type = cell_data[6];
     var cell_patt = cell_data[7];
     */
     //$('#language_table').html(typeof sel_lang);

     //produces line if option is set to Select all or if line contains search term
     if((sel_lang === "Select All" || sel_lang === "" || sel_lang == cell_data[0])
         && (sel_langfam === "Select All" || sel_langfam === "" || sel_langfam == cell_data[1])
         && (sel_feat === "all" || bool_feat)
         && (sel_order === "all" || bool_order)
         && (sel_type === "all" || bool_type)
         && (sel_patt === "all" || bool_patt)
        )
     {
      count_rows++;
      table_data += '<tr>';

      //variable for link to language file
      var lang_link = 'coordination/';

      //adds line
      for(var cell_count=0; cell_count<cell_data.length; cell_count++)
      {
       if(cell_count === 0)  //creates link to language
       {
        //removes spaces in language name and converts to lower case
        lang_link += cell_data[cell_count];
        lang_link = lang_link.toLowerCase();
        lang_link = lang_link.split(" ").join("");

        table_data += '<td><a href="'+lang_link+'">'+cell_data[cell_count]+'</a></td>';
       }
       else
       {
        table_data += '<td>'+cell_data[cell_count]+'</td>';
       }
      }
      table_data += '</tr>';
     }

    }
    //----------
    table_data += '</tbody></table>';
    if(count_rows > 0)
    {
      document.getElementById('language_table').innerHTML = table_data;
    }
    else
    {
      $('#language_table').html("No results found.");
    }
      //clears search fields after printing results
      $('input[name=lang]').val('');
      $('input[name=langfam]').val('');

    //$('#language_table').html(sel_feat);
   }
  });
 });

});
</script>
